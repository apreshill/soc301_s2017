<!DOCTYPE html>
<html>
  <head>
    <title>SOC 301 Slides</title>
    <meta charset="utf-8">
    <meta name="author" content="Chester Ismay" />
    <link rel="stylesheet" href="example.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# SOC 301 Slides
## Pacific University
### Chester Ismay
### Spring 2017

---




layout: true

.footer[[Week 06 - Thursday](https://ismayc.github.io/soc301_s2017/2017/03/09/week-07---thursday/)]

---

name: week06th
class: center, middle

# Week 06 - Thursday

# March 9, 2017
---

# Warmup

### Write the code to produce the following table using functions in the `dplyr` package on the `gapminder` data frame in the `gapminder` R package


```
## Source: local data frame [4 x 3]
## Groups: continent [?]
## 
##   continent       country mean_gdp_all_years
##      &lt;fctr&gt;        &lt;fctr&gt;              &lt;dbl&gt;
## 1  Americas        Canada           22410.75
## 2  Americas United States           26261.15
## 3   Oceania     Australia           19980.60
## 4   Oceania   New Zealand           17262.62
```

---

# Setting 1 to change in RStudio

&lt;img src="figure/setting1.png" width="65%" style="display: block; margin: auto;" /&gt;

---

# Setting 2 to change in RStudio

&lt;img src="figure/setting2.png" width="65%" style="display: block; margin: auto;" /&gt;

---

# Review of the 5MV so far

- `filter()`
- `summarize()`
- `group_by()`

---

# The 5MV

- `filter()`
- `summarize()`
- `group_by()`
--

- `mutate()`

--
- `arrange()`

---

# `mutate()`

- Allows you to 
    1. &lt;font color="blue"&gt;create a new variable with a specific value&lt;/font&gt; OR
    2. create a new variable based on other variables OR
    3. change the contents of an existing variable

--


```r
gap_plus &lt;- gapminder %&gt;% mutate(just_one = 1)
head(gap_plus)
```

```
## # A tibble: 6 × 7
##       country continent  year lifeExp      pop gdpPercap just_one
##        &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 Afghanistan      Asia  1952  28.801  8425333  779.4453        1
## 2 Afghanistan      Asia  1957  30.332  9240934  820.8530        1
## 3 Afghanistan      Asia  1962  31.997 10267083  853.1007        1
## 4 Afghanistan      Asia  1967  34.020 11537966  836.1971        1
## 5 Afghanistan      Asia  1972  36.088 13079460  739.9811        1
## 6 Afghanistan      Asia  1977  38.438 14880372  786.1134        1
```

---

# `mutate()`

- Allows you to 
    1. create a new variable with a specific value OR
    2. &lt;font color="blue"&gt;create a new variable based on other variables&lt;/font&gt; OR
    3. change the contents of an existing variable

--


```r
gap_w_gdp &lt;- gapminder %&gt;% mutate(gdp = pop * gdpPercap)
head(gap_w_gdp)
```

```
## # A tibble: 6 × 7
##       country continent  year lifeExp      pop gdpPercap         gdp
##        &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;       &lt;dbl&gt;
## 1 Afghanistan      Asia  1952  28.801  8425333  779.4453  6567086330
## 2 Afghanistan      Asia  1957  30.332  9240934  820.8530  7585448670
## 3 Afghanistan      Asia  1962  31.997 10267083  853.1007  8758855797
## 4 Afghanistan      Asia  1967  34.020 11537966  836.1971  9648014150
## 5 Afghanistan      Asia  1972  36.088 13079460  739.9811  9678553274
## 6 Afghanistan      Asia  1977  38.438 14880372  786.1134 11697659231
```

---

# `mutate()`

- Allows you to 
    1. create a new variable with a specific value OR
    2. create a new variable based on other variables OR
    3. &lt;font color="blue"&gt;change the contents of an existing variable&lt;/font&gt;

--


```r
gap_weird &lt;- gapminder %&gt;% mutate(pop = pop + 1000)
head(gap_weird)
```

```
## # A tibble: 6 × 6
##       country continent  year lifeExp      pop gdpPercap
##        &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 Afghanistan      Asia  1952  28.801  8426333  779.4453
## 2 Afghanistan      Asia  1957  30.332  9241934  820.8530
## 3 Afghanistan      Asia  1962  31.997 10268083  853.1007
## 4 Afghanistan      Asia  1967  34.020 11538966  836.1971
## 5 Afghanistan      Asia  1972  36.088 13080460  739.9811
## 6 Afghanistan      Asia  1977  38.438 14881372  786.1134
```

---

# `arrange()`

- Reorders the rows in a data frame based on the values of one or more variables
--


```r
gapminder %&gt;%
  arrange(year, country)
```

```
## # A tibble: 1,704 × 6
##        country continent  year lifeExp      pop  gdpPercap
##         &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;      &lt;dbl&gt;
## 1  Afghanistan      Asia  1952  28.801  8425333   779.4453
## 2      Albania    Europe  1952  55.230  1282697  1601.0561
## 3      Algeria    Africa  1952  43.077  9279525  2449.0082
## 4       Angola    Africa  1952  30.015  4232095  3520.6103
## 5    Argentina  Americas  1952  62.485 17876956  5911.3151
## 6    Australia   Oceania  1952  69.120  8691212 10039.5956
## 7      Austria    Europe  1952  66.800  6927772  6137.0765
## 8      Bahrain      Asia  1952  50.939   120447  9867.0848
## 9   Bangladesh      Asia  1952  37.484 46886859   684.2442
## 10     Belgium    Europe  1952  68.000  8730405  8343.1051
## # ... with 1,694 more rows
```

---

# `arrange()`

- Can also put into descending order
--


```r
gapminder %&gt;%
  filter(year &gt; 2000) %&gt;%
  arrange(desc(lifeExp))
```
--


```
## # A tibble: 284 × 6
##             country continent  year lifeExp       pop gdpPercap
##              &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
## 1             Japan      Asia  2007  82.603 127467972  31656.07
## 2  Hong Kong, China      Asia  2007  82.208   6980412  39724.98
## 3             Japan      Asia  2002  82.000 127065841  28604.59
## 4           Iceland    Europe  2007  81.757    301931  36180.79
## 5       Switzerland    Europe  2007  81.701   7554661  37506.42
## 6  Hong Kong, China      Asia  2002  81.495   6762476  30209.02
## 7         Australia   Oceania  2007  81.235  20434176  34435.37
## 8             Spain    Europe  2007  80.941  40448191  28821.06
## 9            Sweden    Europe  2007  80.884   9031088  33859.75
## 10           Israel      Asia  2007  80.745   6426679  25523.28
## # ... with 274 more rows
```

---

# Other verbs

## `rename()`

- To change a variable's name in a data frame to a new name
- New name comes before the `=`, old name comes after the `=`
--


```r
gap2 &lt;- gapminder
gap2 &lt;- gap2 %&gt;%
  rename(life_exp = lifeExp,
         gdp_per_cap = gdpPercap)
head(gap2, 3)
```

```
## # A tibble: 3 × 6
##       country continent  year life_exp      pop gdp_per_cap
##        &lt;fctr&gt;    &lt;fctr&gt; &lt;int&gt;    &lt;dbl&gt;    &lt;int&gt;       &lt;dbl&gt;
## 1 Afghanistan      Asia  1952   28.801  8425333    779.4453
## 2 Afghanistan      Asia  1957   30.332  9240934    820.8530
## 3 Afghanistan      Asia  1962   31.997 10267083    853.1007
```


---

# More with `inner_join()`

- Join `by` columns of different names




```r
library(readr)
countries &lt;- read_csv("http://ismayc.github.io/soc301_s2017/countries.csv")
head(countries)
```


---

# Work time!

***

## Work on [PS6](../problem-sets/index.html#ps6)

## Ask questions about [DC8](https://campus.datacamp.com/courses/reporting-with-r-markdown)

## Work on [DC9](https://campus.datacamp.com/courses/effective-data-storytelling-using-the-tidyverse/filtering-grouping-summarizing)

## Work on Group Project

---

{r old, child='temp_deck.Rmd'}
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "monokai",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('showSlide', function (slide) {setTimeout(function() {window.dispatchEvent(new Event('resize'));}, 100)});</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
